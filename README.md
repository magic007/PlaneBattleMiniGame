# 小程序飞机大战

一个经典的飞机射击类微信小游戏，玩家通过控制飞机躲避敌机并发射子弹击落敌机获得分数。

## 游戏特色

- 经典的飞机射击玩法
- 多关卡难度递进
- 实时分数显示
- 流畅的游戏画面
- 打击音效反馈


## 功能特性

- **关卡系统**：游戏包含多个关卡，每个关卡的敌机数量和类型不同。
- **健康游戏忠告**：在游戏开始时显示健康游戏忠告。
- **碰撞检测**：实现子弹与敌机、玩家与敌机的碰撞检测。
- **得分系统**：玩家击毁敌机后获得分数，并在游戏结束时保存得分。
- **背景切换**：每个关卡完成后切换背景。


## 玩法说明

1. 触摸屏幕任意位置开始游戏
2. 手指滑动控制飞机移动
3. 自动发射子弹攻击敌机
4. 击中敌机获得分数
5. 碰到敌机游戏结束
6. 查看得分并可重新开始

## 项目结构

```
├── audio                                      // 音频资源
├── images                                     // 图片资源
├── js
│   ├── base
│   │   ├── animatoin.js                       // 帧动画的简易实现
│   │   ├── pool.js                            // 对象池的简易实现
│   │   └── sprite.js                          // 游戏基本元素精灵类
│   ├── libs
│   │   └── tinyemitter.js                     // 事件监听和触发
│   ├── npc
│   │   └── enemy.js                           // 敌机类
│   ├── player
│   │   ├── bullet.js                          // 子弹类
│   │   └── index.js                           // 玩家类
│   ├── runtime
│   │   ├── background.js                      // 背景类
│   │   ├── gameinfo.js                        // 用于展示分数和结算界面
│   │   └── music.js                           // 全局音效管理器
│   ├── databus.js                             // 管控游戏状态
│   ├── main.js                                // 游戏入口主函数
│   └── render.js                              // 基础渲染信息
├── .eslintrc.js                               // 代码规范
├── game.js                                    // 游戏逻辑主入口
├── game.json                                  // 游戏运行时配置
├── project.config.json                        // 项目配置
└── project.private.config.json                // 项目个人配置
```

## 代码说明

- **Main 类**：游戏的主控制类，负责初始化游戏、管理关卡和处理游戏逻辑。
- **LevelManager 类**：管理游戏的关卡信息，包括当前关卡、敌机数量和背景设置。
- **BackGround 类**：负责背景的绘制和切换。
- **GameInfo 类**：负责游戏UI的显示，包括得分和当前关卡信息。


## 技术实现

- 使用 Canvas 2D 进行游戏渲染
- 对象池技术优化性能
- 帧动画系统
- 碰撞检测系统
- 全局音效管理
- Bmob 后端云记录分数

## 开发环境

1. 微信开发者工具

## 本地运行

1. 克隆项目
2. 使用微信开发者工具打开项目
3. 配置 AppID（可使用测试号）
4. 编译运行

## 配置说明

### 游戏配置
在 `databus.js` 中可以调整以下参数：
- 游戏难度
- 敌机生成频率
- 子弹发射频率
- 初始生命值等

### 后端配置
如需使用后端云功能，需要在项目中配置 Bmob：
```javascript
// 在 app.js 中配置
Bmob.initialize("您的应用ID", "您的REST API密钥");
```

## 开发建议

1. 游戏素材建议使用小尺寸图片，优化加载速度
2. 注意适配不同尺寸的手机屏幕
3. 控制对象池大小，避免内存占用过大
4. 优化碰撞检测频率，提高性能

## 常见问题

1. 游戏无法播放声音
   - 检查是否获取音频播放权限
   - 确认音频文件是否正确加载

2. 游戏卡顿
   - 检查对象池使用情况
   - 优化图片资源大小
   - 降低敌机生成频率

## 版本历史

- v1.0.0
  - 基础游戏功能
  - 分数系统
  - 音效系统
  - 关卡功能

## 后续计划

- [ ] 添加多种敌机类型
- [ ] 增加道具系统
- [ ] 添加技能系统
- [ ] 优化游戏画面
- [ ] 添加新手引导

## 参考资料

- [微信小游戏开发文档](https://developers.weixin.qq.com/minigame/dev/guide/)
- [Canvas 2D 教程](https://developer.mozilla.org/zh-CN/docs/Web/API/Canvas_API)

## 许可证

本项目采用 MIT 许可证